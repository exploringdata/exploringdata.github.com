let colors=['#ffffe0','#f6e3b9','#eac6a0','#deaa8b','#d08e78','#c27167','#b35457','#a43548','#94003a'];let columns=['1995','1996','1997','1998','1999','2000','2001','2002','2003','2004','2005','2006','2007','2008','2009','2010','2011'];let data_source='https://data.worldbank.org/indicator/AG.LND.FRST.ZS';let selected_col='2008';let map=d3.choropleth().geofile('/d3-geomap/topojson/world/countries.json').colors(colors).column(selected_col).domain([0,100]).legend({width:120,height:295}).unitId('iso3').postUpdate(()=>{annotate(map,95,120,`Intentional Homicides by 100,000 People in ${selected_col}`,data_source=data_source);let legend=map.svg.select('g.legend');let text=legend.select('text[class="text-9"]');text.text(`> ${text.text()}`);map.data.forEach(d=>{let val=d[map.column()];let unit=d3.select(`.unit-${d[map.unitId()]}`);if(val&&0>=Math.round(val,2)){unit.style('fill','#ffffff')}})});d3.csv('/csv/homicides.csv').then(data=>{let selection=d3.select('#map').datum(data);map.draw(selection);animate(map,columns,interval_length=300);colSelect(map,columns)});